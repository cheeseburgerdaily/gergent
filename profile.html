<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile</title>

<!-- Nunito font -->
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  body {
    background-color: #150d23;
    margin: 0;
    font-family: Arial, sans-serif;
  }

  .topbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: #10001f;
    padding: 12px 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 20;
  }

  /* SIDEBAR BASE */
  .sidebar {
    position: fixed;
    top: 65px;
    left: 0;
    width: 60px;
    height: 100vh;
    background-color: #10001f;
    padding-top: 60px;
    overflow-x: hidden;
    transition: width 0.25s ease;
    z-index: 10;
  }

  /* EXPANDED SIDEBAR */
  .sidebar.open {
    width: 180px;
  }

  /* SIDEBAR ITEMS */
  .sidebar-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 18px;
    cursor: pointer;
    color: white;
    font-family: "Nunito", sans-serif;
  }

  .sidebar-item:hover {
    background-color: #30005e;
    border-radius: 8px;
  }

  /* ICONS */
  .sidebar-icon {
    width: 24px;
    height: 24px;
  }

  /* TEXT LABELS */
  .sidebar-text {
    opacity: 0;
    white-space: nowrap;
    transition: opacity 0.2s ease;
    font-size: 16px;
  }

  .sidebar.open .sidebar-text {
    opacity: 1;
  }

  .menu-icon {
    position: absolute;
    left: 17px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 5px;
  }

  .menu-icon div {
    width: 26px;
    height: 3px;
    background-color: #88719e;
    border-radius: 3px;
  }

  .center-box {
    background-color: #88719e;
    padding: 10px 16px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: "Nunito", sans-serif;
    font-weight: 700;
    color: white;
    font-size: 16px;
  }

  .center-group {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .number {
    font-family: "Nunito", sans-serif;
    font-weight: 700;
    color: white;
    font-size: 16px;
  }

  .arrow-img {
    width: 14px;
    height: auto;
    filter: invert(1);
  }

  .settings-icon {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 22px;
    cursor: pointer;
    filter: invert(62%) sepia(13%) saturate(722%) hue-rotate(233deg) brightness(90%) contrast(86%);
  }

  .rewards-icon {
    position: absolute;
    right: 100px;
    top: 50%;
    transform: translateY(-51%);
    width: 22px;
    cursor: pointer;
    filter: invert(62%) sepia(13%) saturate(722%) hue-rotate(233deg) brightness(90%) contrast(86%);
  }

  .profile-icon {
    position: absolute;
    right: 60px;
    top: 50%;
    transform: translateY(-51%);
    width: 22px;
    cursor: pointer;
    filter: invert(62%) sepia(13%) saturate(722%) hue-rotate(233deg) brightness(90%) contrast(86%);
  }

  .wallet-btn {
    background-color: #2ecc71;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    font-family: "Nunito", sans-serif;
    font-weight: 700;
    cursor: pointer;
    font-size: 16px;
  }

  .wallet-btn:hover {
    background-color: #28b863;
  }

  .cases-icon,
  .home-icon,
  .inventory-icon,
  .trade-icon {
    filter: invert(62%) sepia(13%) saturate(722%) hue-rotate(233deg) brightness(90%) contrast(86%);
    transform: translateY(-5%);
    width: 24px;
  }

  .settings-container {
    margin-left: 100px;
    margin-top: 120px;
    width: 300px;
    background-color: #10001f;
    padding: 20px;
    border-radius: 10px;
    font-family: "Nunito", sans-serif;
    color: white;
  }

  .settings-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 15px;
    color: #c7b2df;
  }

  .settings-label {
    font-size: 16px;
    font-weight: 700;
    color: #c7b2df;
  }

  .settings-input {
    width: 100%;
    padding: 10px;
    margin-top: 8px;
    background-color: #2a1a3f;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-family: "Nunito";
  }

  .save-btn {
    width: 100%;
    padding: 12px;
    background-color: #2ecc71;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 700;
    margin-top: 20px;
    cursor: pointer;
  }

  .save-btn:hover {
    background-color: #28b863;
  }

  /* Make input and button exactly same width */
  .settings-input,
  .save-btn {
    box-sizing: border-box;
  }

  /* Green "Username Saved!" text */
  .username-saved {
    color: #2ecc71;
    font-family: "Nunito", sans-serif;
    font-weight: 700;
    margin-top: 10px;
    display: none;
  }

/* Smooth page fade-in */

  to   { opacity: 1; transform: translateY(0); }
}
body {}





/* Notification bar */
.notif-bar {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.9);
  color: #ffffff;
  padding: 10px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-family: "Nunito", Arial, sans-serif;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 9999;
}
.notif-bar.show { opacity: 1; }
.notif-bar.error { background: #c0392b; }
.notif-bar.success { background: #27ae60; }

</style>

</head>
<body>
<div id="notifBar" class="notif-bar"></div>


<div id="loginButton" style="position: fixed; bottom: 15px; right: 15px; background:#7d5fff; padding:10px 16px; border-radius:8px; color:#fff; cursor:pointer; font-size:15px; font-weight:bold; z-index:9999;">Login</div>



<!-- TOP BAR -->
<div class="topbar">

  <div class="menu-icon" onclick="toggleSidebar()">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <div class="center-group">
    <div class="center-box">
        <span id="moneyAmount" class="amount">$0.00</span>
    </div>
    <button class="wallet-btn" onclick="location.href='money_transfer.html'">Wallet</button>
    <img src="images/settings.png" class="settings-icon" alt="settings" onclick="location.href='settings.html'">
    <img src="images/rewards.png" class="rewards-icon" alt="rewards" onclick="location.href='rewards.html'">
    <img src="images/profile.png" class="profile-icon" alt="profile" onclick="location.href='profile.html'">
  </div>

</div>

<!-- LEFT SIDEBAR -->
<div class="sidebar" id="sidebar">

  <div class="sidebar-item" onclick="location.href='index.html'">
    <img src="images/home.png" class="home-icon">
    <span class="sidebar-text">Home</span>
  </div>

  <div class="sidebar-item">
    <img src="images/cases.png" class="cases-icon" onclick="location.href='casepage.html'">
    <span class="sidebar-text">Cases</span>
  </div>

  <div class="sidebar-item">
    <img src="images/inventory.png" class="inventory-icon" onclick="location.href='inventory.html'">
    <span class="sidebar-text">Inventory</span>
  </div>

  <div class="sidebar-item">
    <img src="images/trade.png" class="trade-icon">
    <span class="sidebar-text">Trade Ups</span>
  </div>

</div>

<!-- PROFILE SETTINGS PANEL -->
<div class="settings-container">

  <div class="settings-title">Profile</div>

  <label class="settings-label">Username</label>
  <input type="text" id="usernameInput" class="settings-input" placeholder="Enter username">

  <button class="save-btn" onclick="saveUsername()">Save Username</button>

  <!-- Green status message -->
  <div id="usernameSavedMsg" class="username-saved">
    Username Saved!
  </div>

</div>

<!-- GAME / MONEY SCRIPTS -->
<script type="module" src="money.js"></script>
<script src="money_controls.js"></script>
<script src="kilowatt.js"></script>
<script src="recoil.js"></script>

<script>
function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("open");
}

/* Save username and show green text */
function saveUsername() {
  const username = document.getElementById("usernameInput").value.trim();
  const msg = document.getElementById("usernameSavedMsg");

  if (username === "") {
    msg.style.display = "none"; // hide success if empty
    if (window.showNotification) window.showNotification("Username cannot be empty!","error");
    return;
  }

  localStorage.setItem("username", username);

  // Show green message
  msg.style.display = "block";
  msg.textContent = "Username Saved!";

  // Optional: keep it visible; remove this timeout if you want it to stay
  setTimeout(() => {
    msg.style.display = "none";
  }, 3000);
}

/* Money display logic */
function refreshMoneyDisplay() {
  document.getElementById('moneyAmount').textContent = Money.format(Money.get());
}
Money.onChange(refreshMoneyDisplay);

if (Money.get() === 0) {
   Money.add(10);
}
refreshMoneyDisplay();
</script>


<script>
function updateLoginButton() {
    const btn = document.getElementById("loginButton");
    if (!btn) return;
    if (!localStorage.uid) {
        btn.textContent = "Login";
        btn.onclick = () => window.location.href = "login.html";
    } else {
        const user = localStorage.username || "User";
        btn.textContent = "Logout (" + user + ")";
        btn.onclick = () => {
            localStorage.removeItem("uid");
            localStorage.removeItem("username");
            location.reload();
        };
    }
}
updateLoginButton();
</script>


<script>
window.showNotification = function(msg, type) {
  var bar = document.getElementById('notifBar');
  if (!bar) return;
  bar.textContent = msg;
  bar.classList.remove('error','success');
  if (type === 'error') bar.classList.add('error');
  if (type === 'success') bar.classList.add('success');
  bar.classList.add('show');
  clearTimeout(window._notifTimer);
  window._notifTimer = setTimeout(function() {
    bar.classList.remove('show');
  }, 2200);
}
</script>

</body>
</html>
